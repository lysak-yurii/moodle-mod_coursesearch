/**
 * Floating widget module for course search.
 *
 * @module     mod_coursesearch/floatingwidget
 * @copyright  2025
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_coursesearch/floatingwidget",[],(function(){function toggleWidget(widget){widget.classList.contains("coursesearch-floating-widget-collapsed")?function(widget){widget.classList.remove("coursesearch-floating-widget-collapsed");const toggle=widget.querySelector(".coursesearch-floating-widget-toggle");toggle&&toggle.setAttribute("aria-expanded","true")}(widget):collapseWidget(widget)}function collapseWidget(widget){widget.classList.add("coursesearch-floating-widget-collapsed");const toggle=widget.querySelector(".coursesearch-floating-widget-toggle");toggle&&toggle.setAttribute("aria-expanded","false")}return{init:function(){const widget=document.getElementById("coursesearch-floating-widget");if(!widget)return;const toggle=widget.querySelector(".coursesearch-floating-widget-toggle"),close=widget.querySelector(".coursesearch-floating-widget-close"),input=widget.querySelector(".coursesearch-floating-widget-input");toggle&&(toggle.addEventListener("click",(function(){toggleWidget(widget)})),toggle.addEventListener("keydown",(function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),toggleWidget(widget))}))),close&&close.addEventListener("click",(function(){collapseWidget(widget)})),new MutationObserver((function(mutations){mutations.forEach((function(mutation){"attributes"===mutation.type&&"class"===mutation.attributeName&&(widget.classList.contains("coursesearch-floating-widget-collapsed")||input&&setTimeout((function(){input.focus()}),100))}))})).observe(widget,{attributes:!0,attributeFilter:["class"]}),document.addEventListener("click",(function(e){widget.contains(e.target)||widget.classList.contains("coursesearch-floating-widget-collapsed")||collapseWidget(widget)}))}}}));

//# sourceMappingURL=floatingwidget.min.js.map